<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Thailand Honeymoon Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Beige, Soft Peach, Earthy Brown, Muted Teal) -->
    <!-- Application Structure Plan: A single-page dashboard design is used to provide a non-linear, user-driven exploration experience. The structure is broken into four logical, navigable sections: 1) 'Overview' for a quick budget summary with a donut chart, 2) 'Interactive Itinerary' with clickable day cards and a cumulative spending line chart to track budget flow, 3) 'Destination Explorer' using tabs and accordions to neatly organize detailed information about Bangkok and Chiang Mai, and 4) 'Travel Tips' for practical advice. This structure was chosen to transform the dense report into an engaging tool, allowing users to quickly grasp key financials, deep-dive into daily plans, or explore specific destination details on demand, enhancing usability and comprehension over a linear document format. -->
    <!-- Visualization & Content Choices: 
        - Budget Overview: Goal=Inform/Compare. Method=Donut Chart (Chart.js) for budget allocation & Stat Cards (HTML/Tailwind) for key numbers. Interaction=Hover on chart. Justification=Provides an immediate, high-level understanding of financials.
        - Cumulative Spending: Goal=Change. Method=Line Chart (Chart.js). Interaction=Hover to see daily totals. Justification=Visually tracks spending pace against the budget over the 14 days.
        - Itinerary: Goal=Organize. Method=Clickable Day Cards (HTML/Tailwind/JS) revealing a detailed modal. Interaction=Click on a day. Justification=Breaks down the dense schedule into manageable, interactive chunks, far more user-friendly than a large static table.
        - Destination Details: Goal=Organize/Inform. Method=Tabs and Accordions (HTML/Tailwind/JS). Interaction=Click to switch tabs/expand content. Justification=Neatly categorizes a large amount of text, preventing information overload and allowing users to focus on specific interests (e.g., only hotels in Chiang Mai).
        - Tips: Goal=Inform. Method=Styled lists with icons (HTML/Tailwind). Justification=Improves scannability of key advice.
        - AI-Powered Activity Suggester: Goal=Engage/Inform. Method=LLM text generation triggered by a button in modal. Interaction=Button click. Justification=Adds dynamic, personalized suggestions to enhance trip planning.
        - Local Delicacy Explainer: Goal=Engage/Inform. Method=LLM text generation triggered by a button in destination section. Interaction=Button click. Justification=Provides unique culinary insights beyond pre-defined content.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #FDF8F0; color: #4A4A4A; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .nav-active { color: #D98B76; border-bottom: 2px solid #D98B76; }
        .nav-link { transition: all 0.3s ease; border-bottom: 2px solid transparent; padding-bottom: 4px; }
        .nav-link:hover { color: #D98B76; }
        .card { background-color: #FFFFFF; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); transition: all 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .chart-container { position: relative; width: 100%; max-width: 450px; margin-left: auto; margin-right: auto; height: 300px; max-height: 350px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .day-card { cursor: pointer; border: 1px solid #E5E7EB; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        .tab-active { background-color: #D98B76; color: white; }
        .generate-btn {
            background-color: #6A8A82;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s ease-in-out;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .generate-btn:hover {
            background-color: #5A7C72;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-2xl font-bold text-[#D98B76]">Thai Honeymoon</h1>
                <div class="hidden sm:flex sm:space-x-8">
                    <a href="#overview" class="nav-link nav-active">Overview</a>
                    <a href="#itinerary" class="nav-link">Itinerary</a>
                    <a href="#explorer" class="nav-link">Destination Explorer</a>
                    <a href="#tips" class="nav-link">Travel Tips</a>
                </div>
                <div class="sm:hidden">
                    <select id="mobile-nav" class="bg-white border border-gray-300 rounded-md py-2 px-3 text-gray-700">
                        <option value="#overview">Overview</option>
                        <option value="#itinerary">Itinerary</option>
                        <option value="#explorer">Explorer</option>
                        <option value="#tips">Tips</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Section 1: Overview -->
        <section id="overview" class="mb-16 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800">Your Honeymoon at a Glance</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">This interactive dashboard summarizes your entire 14-day romantic getaway to Thailand. Get a clear picture of your budget and how it's allocated for this unforgettable experience.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="card p-6 text-center">
                    <h3 class="text-lg font-semibold text-gray-500">Total Budget</h3>
                    <p class="text-4xl font-bold text-[#6A8A82] mt-2">220,000</p>
                    <p class="text-gray-500">BDT</p>
                </div>
                <div class="card p-6 text-center">
                    <h3 class="text-lg font-semibold text-gray-500">Flight Costs</h3>
                    <p class="text-4xl font-bold text-[#D98B76] mt-2">85,000</p>
                     <p class="text-gray-500">BDT</p>
                </div>
                <div class="card p-6 text-center">
                    <h3 class="text-lg font-semibold text-gray-500">On-Ground Budget</h3>
                    <p class="text-4xl font-bold text-[#6A8A82] mt-2">135,000</p>
                     <p class="text-gray-500">BDT</p>
                </div>
                <div class="card p-6 text-center">
                    <h3 class="text-lg font-semibold text-gray-500">Avg. Daily Spend</h3>
                    <p class="text-4xl font-bold text-[#6A8A82] mt-2">~9,642</p>
                     <p class="text-gray-500">BDT</p>
                </div>
            </div>

            <div class="card p-6 md:p-8">
                <h3 class="text-2xl font-bold text-center mb-6 text-gray-700">On-Ground Budget Breakdown</h3>
                <div class="chart-container">
                    <canvas id="budgetDoughnutChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section 2: Interactive Itinerary -->
        <section id="itinerary" class="mb-16 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800">Interactive Itinerary</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Explore your 14-day journey day by day. Click on any day to see detailed plans for activities, dining, and accommodation. Track your projected spending with the cumulative cost chart.</p>
            </div>
            
            <div class="card p-6 md:p-8 mb-12">
                 <h3 class="text-2xl font-bold text-center mb-6 text-gray-700">Cumulative Spending Over 14 Days</h3>
                 <div class="w-full max-w-4xl mx-auto h-[40vh] max-h-[400px]">
                    <canvas id="cumulativeSpendingChart"></canvas>
                </div>
            </div>

            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4">
            </div>
        </section>

        <!-- Section 3: Destination Explorer -->
        <section id="explorer" class="mb-16 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800">Destination Explorer</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Dive deeper into your destinations. Find curated suggestions for places to stay, must-do activities, and tips for getting around Bangkok and Chiang Mai.</p>
            </div>
            <div class="w-full max-w-4xl mx-auto">
                <div class="flex justify-center border-b border-gray-200 mb-6">
                    <button class="destination-tab tab-active px-6 py-3 font-semibold text-lg" data-target="bangkok-content">Bangkok</button>
                    <button class="destination-tab px-6 py-3 font-semibold text-lg text-gray-600" data-target="chiang-mai-content">Chiang Mai</button>
                </div>
                <div id="destination-content-container">
                </div>
            </div>
        </section>
        
        <!-- Section 4: Travel Tips -->
        <section id="tips" class="scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800">Essential Travel Tips</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Make your honeymoon smooth and enjoyable with these practical tips for budgeting, etiquette, and safety in Thailand.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                <div class="card p-6">
                    <h3 class="text-2xl font-bold mb-4 text-gray-700">Budgeting & Money</h3>
                    <ul class="space-y-3 text-gray-600">
                        <li class="flex items-start"><span class="text-[#6A8A82] mr-3 mt-1">&#10003;</span><span><b>Embrace Street Food:</b> The most impactful way to save money and enjoy authentic, delicious meals.</span></li>
                        <li class="flex items-start"><span class="text-[#6A8A82] mr-3 mt-1">&#10003;</span><span><b>Use Public Transport:</b> Opt for BTS/MRT in Bangkok and Songthaews in Chiang Mai for cheap, efficient travel.</span></li>
                        <li class="flex items-start"><span class="text-[#6A8A82] mr-3 mt-1">&#10003;</span><span><b>Book in Advance:</b> Secure flights and popular tours early to get better prices.</span></li>
                        <li class="flex items-start"><span class="text-[#6A8A82] mr-3 mt-1">&#10003;</span><span><b>Negotiate Respectfully:</b> It's common practice at markets. A polite approach can lead to better prices.</span></li>
                        <li class="flex items-start"><span class="text-[#6A8A82] mr-3 mt-1">&#10003;</span><span><b>Cash is King:</b> Many local vendors and markets prefer cash. Carry small denominations.</span></li>
                    </ul>
                </div>
                <div class="card p-6">
                    <h3 class="text-2xl font-bold mb-4 text-gray-700">Culture & Safety</h3>
                     <ul class="space-y-3 text-gray-600">
                        <li class="flex items-start"><span class="text-[#D98B76] mr-3 mt-1">&#10003;</span><span><b>Temple Dress Code:</b> Always cover shoulders, chest, and knees as a sign of respect.</span></li>
                        <li class="flex items-start"><span class="text-[#D98B76] mr-3 mt-1">&#10003;</span><span><b>Stay Hydrated:</b> Drink plenty of bottled water to cope with the hot and humid climate.</span></li>
                        <li class="flex items-start"><span class="text-[#D98B76] mr-3 mt-1">&#10003;</span><span><b>Local Etiquette:</b> A simple 'wai' (traditional greeting) and a smile are highly appreciated.</span></li>
                        <li class="flex items-start"><span class="text-[#D98B76] mr-3 mt-1">&#10003;</span><span><b>Get a Local SIM:</b> Essential for navigation with Google Maps or Grab and for communication.</span></li>
                        <li class="flex items-start"><span class="text-[#D98B76] mr-3 mt-1">&#10003;</span><span><b>Be Aware:</b> Thailand is generally safe, but always be mindful of your surroundings and secure your valuables.</span></li>
                    </ul>
                </div>
            </div>
        </section>

    </main>
    
    <!-- Itinerary Modal -->
    <div id="itineraryModal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-95">
            <div class="sticky top-0 bg-white p-6 border-b border-gray-200 flex justify-between items-center">
                <h3 id="modalTitle" class="text-2xl font-bold text-gray-800"></h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="modalContent" class="p-6">
                <div id="aiActivitySuggestions" class="mt-6 border-t pt-4">
                    <h4 class="font-bold text-lg text-gray-700">✨ AI Activity Suggestions</h4>
                    <button id="generateActivitiesBtn" class="generate-btn">
                        Suggest More Activities ✨
                        <div id="activitySpinner" class="hidden animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"></div>
                    </button>
                    <div id="aiActivityOutput" class="mt-4 text-gray-700 text-sm"></div>
                </div>
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const honeymoonData = {
            budget: {
                accommodation: 51700,
                activities: 50338,
                food: 23100,
                transport: 8900
            },
            itinerary: [
                { day: 1, location: "Bangkok", hotel: "Patra Boutique Hotel (3,500)", activity: "Arrival, Check-in, Explore Pratunam Market & Street Food (Free/Variable)", food: "Street Food (825/person)", transport: "Airport Transfer + Local (700)", dailyTotal: 5025 },
                { day: 2, location: "Bangkok", hotel: "Patra Boutique Hotel (3,500)", activity: "Grand Palace & Wat Pho (4,480)", food: "Street Food (825/person)", transport: "Local Transport (700)", dailyTotal: 9505 },
                { day: 3, location: "Bangkok", hotel: "Patra Boutique Hotel (3,500)", activity: "Wat Arun at Sunset & Chao Phraya Dinner Cruise (1,300 + 8,424)", food: "Street Food (825/person)", transport: "Local Transport (700)", dailyTotal: 14749 },
                { day: 4, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Morning Flight to Chiang Mai, Check-in, Explore Old City & Night Bazaar (Free/Variable)", food: "Street Food (825/person)", transport: "Airport Transfer + Local (600)", dailyTotal: 8725 },
                { day: 5, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Ethical Elephant Sanctuary Visit (11,520)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 16745 },
                { day: 6, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Doi Inthanon National Park Day Trip (11,700)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 16925 },
                { day: 7, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Hands-on Thai Cooking Class (6,552)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 11777 },
                { day: 8, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Wat Phra That Doi Suthep (512), Old City Exploration (Free/Variable)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 5737 },
                { day: 9, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Explore Nimmanhaemin Road, Cafes & Boutiques (Free/Variable)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 5225 },
                { day: 10, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Relax / Optional Activity (e.g., Thai Massage - Variable)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 5225 },
                { day: 11, location: "Chiang Mai", hotel: "Goldenbell Hotel (3,800)", activity: "Revisit Favorite Spot / Souvenir Shopping (Free/Variable)", food: "Street Food (825/person)", transport: "Local Transport (600)", dailyTotal: 5225 },
                { day: 12, location: "Bangkok", hotel: "Patra Boutique Hotel (3,500)", activity: "Morning Flight to Bangkok, Check-in, Explore Chinatown/Shopping (Free/Variable)", food: "Street Food (825/person)", transport: "Airport Transfer + Local (700)", dailyTotal: 8325 },
                { day: 13, location: "Bangkok", hotel: "Patra Boutique Hotel (3,500)", activity: "Floating & Railway Markets Day Trip (5,850)", food: "Street Food (825/person)", transport: "Local Transport (700)", dailyTotal: 10875 },
                { day: 14, location: "Bangkok", hotel: "Patra Boutique Hotel (3,500)", activity: "Last-minute Souvenir Shopping, Departure", food: "Street Food (825/person)", transport: "Airport Transfer (700)", dailyTotal: 5025 }
            ],
            destinations: {
                bangkok: {
                    title: "Bangkok Bliss: City of Angels & Romance",
                    content: `
                        <div class="accordion">
                            <h4 class="accordion-header">Where to Stay</h4>
                            <div class="accordion-content">
                                <ul class="list-disc pl-5 space-y-2 mt-2 text-gray-600">
                                    <li><b>Patra Boutique Hotel (Pratunam):</b> A budget-friendly and highly-rated 3-star option in a prime shopping area. (Est. 3,500 BDT/night)</li>
                                    <li><b>Baan Wanglang Riverside:</b> A charming 3-star hotel with romantic river views, perfect for a tranquil escape. (Est. 7,000 BDT/night)</li>
                                    <li><b>VELA Dhi GLOW Pratunam:</b> A top-rated 4-star hotel offering more comfort and amenities in a great central location. (Est. 5,500-7,000 BDT/night)</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion">
                            <h4 class="accordion-header">Must-Do Activities</h4>
                            <div class="accordion-content">
                               <ul class="list-disc pl-5 space-y-2 mt-2 text-gray-600">
                                    <li><b>Grand Palace & Wat Pho:</b> Explore Thailand's most revered landmarks. Dress modestly! (Est. 4,480 BDT)</li>
                                    <li><b>Wat Arun at Sunset:</b> Witness the stunning Temple of Dawn, especially beautiful at sunset. (Est. 1,300 BDT)</li>
                                    <li><b>Chao Phraya River Dinner Cruise:</b> A classic romantic evening with dinner and illuminated city views. (Est. 8,424 BDT)</li>
                                    <li><b>Floating & Railway Markets:</b> A unique day trip to experience Damnoen Saduak and Maeklong markets. (Est. 5,850 BDT for a tour)</li>
                                    <li><b>Khao San Road:</b> Dive into the vibrant nightlife and street food scene for a lively, budget-friendly evening.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion">
                            <h4 class="accordion-header">Getting Around</h4>
                            <div class="accordion-content">
                               <ul class="list-disc pl-5 space-y-2 mt-2 text-gray-600">
                                    <li><b>BTS Skytrain & MRT:</b> The most efficient way to avoid traffic for central city travel.</li>
                                    <li><b>Chao Phraya Express Boats:</b> Scenic and cheap way to reach riverside attractions.</li>
                                    <li><b>Taxis/Grab:</b> Use metered taxis or the Grab app for convenience. Always insist on the meter.</li>
                                    <li><b>Tuk-tuks:</b> An iconic experience. Always negotiate the fare before you ride.</li>
                                </ul>
                            </div>
                        </div>
                        <div id="aiDelicacySuggestions_bangkok" class="mt-6 border-t pt-4">
                            <h4 class="font-bold text-lg text-gray-700">✨ AI Local Delicacy Suggestions</h4>
                            <button id="generateDelicaciesBtn_bangkok" class="generate-btn" data-location="Bangkok">
                                Suggest Local Delicacies ✨
                                <div id="delicacySpinner_bangkok" class="hidden animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"></div>
                            </button>
                            <div id="aiDelicacyOutput_bangkok" class="mt-4 text-gray-700 text-sm"></div>
                        </div>`
                },
                chiangMai: {
                    title: "Chiang Mai Charm & Northern Adventures",
                    content: `
                        <div class="accordion">
                            <h4 class="accordion-header">Where to Stay</h4>
                            <div class="accordion-content">
                                <ul class="list-disc pl-5 space-y-2 mt-2 text-gray-600">
                                    <li><b>Goldenbell Hotel Chiangmai:</b> A wonderfully rated 3.5-star hotel known for its super friendly staff. (Est. 3,800 BDT/night)</li>
                                    <li><b>Duangtawan Hotel Chiang Mai:</b> A good value 4-star hotel in a great central location near the Night Bazaar. (Est. 4,500-6,000 BDT/night)</li>
                                    <li><b>BED Chiangmai Gate:</b> A modern, clean hotel in the Old Town, offering a tranquil environment. (Est. 6,000-7,000 BDT/night)</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion">
                            <h4 class="accordion-header">Must-Do Activities</h4>
                            <div class="accordion-content">
                               <ul class="list-disc pl-5 space-y-2 mt-2 text-gray-600">
                                    <li><b>Ethical Elephant Sanctuary:</b> A memorable and moving experience to feed and bathe rescued elephants. (Est. 11,520 BDT)</li>
                                    <li><b>Doi Inthanon National Park:</b> A day trip to Thailand's highest peak, with waterfalls and pagodas. (Est. 11,700 BDT for a tour)</li>
                                    <li><b>Hands-on Thai Cooking Class:</b> A fun, interactive bonding experience that ends with a delicious meal. (Est. 6,552 BDT)</li>
                                    <li><b>Wat Phra That Doi Suthep:</b> Visit the city's most important temple for panoramic views. (Est. 512 BDT)</li>
                                    <li><b>Old City & Night Bazaar:</b> Explore ancient temples by day and enjoy the vibrant market atmosphere by night.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion">
                            <h4 class="accordion-header">Getting Around</h4>
                            <div class="accordion-content">
                               <ul class="list-disc pl-5 space-y-2 mt-2 text-gray-600">
                                    <li><b>Songthaews (Red Trucks):</b> The most iconic, fun, and economical way to travel within the city. (30 THB flat fare)</li>
                                    <li><b>RTC Chiang Mai City Bus:</b> A comfortable, air-conditioned, and cheap option for getting around.</li>
                                    <li><b>Tuk-tuks & Grab:</b> Useful for short, direct trips. Negotiate tuk-tuk fares beforehand.</li>
                                </ul>
                            </div>
                        </div>
                        <div id="aiDelicacySuggestions_chiangMai" class="mt-6 border-t pt-4">
                            <h4 class="font-bold text-lg text-gray-700">✨ AI Local Delicacy Suggestions</h4>
                            <button id="generateDelicaciesBtn_chiangMai" class="generate-btn" data-location="Chiang Mai">
                                Suggest Local Delicacies ✨
                                <div id="delicacySpinner_chiangMai" class="hidden animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"></div>
                            </button>
                            <div id="aiDelicacyOutput_chiangMai" class="mt-4 text-gray-700 text-sm"></div>
                        </div>`
                }
            }
        };

        const BDTFormatter = new Intl.NumberFormat('en-US');

        function setupCharts() {
            const budgetData = honeymoonData.budget;
            const doughnutCtx = document.getElementById('budgetDoughnutChart').getContext('2d');
            new Chart(doughnutCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Accommodation', 'Activities', 'Food', 'Transport'],
                    datasets: [{
                        data: [budgetData.accommodation, budgetData.activities, budgetData.food, budgetData.transport],
                        backgroundColor: ['#6A8A82', '#D98B76', '#EAB3A8', '#F3D5C0'],
                        borderColor: '#FDF8F0',
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: { position: 'bottom', labels: { font: { size: 14, family: 'Inter' } } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed !== null) {
                                        label += BDTFormatter.format(context.parsed) + ' BDT';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            const itinerary = honeymoonData.itinerary;
            const cumulativeData = [];
            let cumulativeTotal = 85000; // Start with flight costs
            itinerary.forEach(day => {
                cumulativeTotal += day.dailyTotal;
                cumulativeData.push(cumulativeTotal);
            });
            const spendingCtx = document.getElementById('cumulativeSpendingChart').getContext('2d');
            new Chart(spendingCtx, {
                type: 'line',
                data: {
                    labels: itinerary.map(day => `Day ${day.day}`),
                    datasets: [{
                        label: 'Cumulative Spending (BDT)',
                        data: cumulativeData,
                        borderColor: '#D98B76',
                        backgroundColor: 'rgba(217, 139, 118, 0.2)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#D98B76',
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: false } },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function setupItinerary() {
            const container = document.querySelector('#itinerary .grid');
            honeymoonData.itinerary.forEach(day => {
                const card = document.createElement('div');
                card.className = 'day-card card p-4 text-center';
                card.dataset.day = day.day;
                card.innerHTML = `
                    <p class="font-bold text-lg">${day.location}</p>
                    <p class="text-sm text-gray-500">Day ${day.day}</p>
                `;
                card.addEventListener('click', () => openItineraryModal(day.day));
                container.appendChild(card);
            });
        }
        
        function openItineraryModal(dayNumber) {
            const dayData = honeymoonData.itinerary.find(d => d.day === dayNumber);
            const modal = document.getElementById('itineraryModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = modal.querySelector('#modalContent'); // Select the content area within the modal

            modalTitle.textContent = `Day ${dayData.day}: ${dayData.location}`;
            modalContent.innerHTML = `
                <div class="space-y-4">
                    <div>
                        <h4 class="font-bold text-lg text-gray-700">🏨 Accommodation</h4>
                        <p class="text-gray-600 pl-4">${dayData.hotel} BDT</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg text-gray-700">🎉 Activities</h4>
                        <p class="text-gray-600 pl-4">${dayData.activity}</p>
                    </div>
                     <div>
                        <h4 class="font-bold text-lg text-gray-700">🍜 Food</h4>
                        <p class="text-gray-600 pl-4">${dayData.food}</p>
                    </div>
                     <div>
                        <h4 class="font-bold text-lg text-gray-700">🚌 Transport</h4>
                        <p class="text-gray-600 pl-4">${dayData.transport}</p>
                    </div>
                    <div class="pt-4 border-t">
                         <h4 class="font-bold text-xl text-right text-[#6A8A82]">Est. Daily Total: ${BDTFormatter.format(dayData.dailyTotal)} BDT</h4>
                    </div>
                </div>
                <div id="aiActivitySuggestions" class="mt-6 border-t pt-4">
                    <h4 class="font-bold text-lg text-gray-700 mb-2">✨ AI Activity Suggestions</h4>
                    <button id="generateActivitiesBtn" class="generate-btn" data-day="${dayData.day}" data-location="${dayData.location}" data-activity="${dayData.activity}">
                        Suggest More Activities ✨
                        <div id="activitySpinner" class="hidden animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"></div>
                    </button>
                    <div id="aiActivityOutput" class="mt-4 text-gray-700 text-sm"></div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => modal.querySelector('.transform').classList.remove('scale-95'), 10);

            document.getElementById('generateActivitiesBtn').addEventListener('click', generateActivitySuggestions);
            document.getElementById('aiActivityOutput').innerHTML = ''; // Clear previous suggestions
        }

        function setupModal() {
            const modal = document.getElementById('itineraryModal');
            const closeModalBtn = document.getElementById('closeModal');
            closeModalBtn.addEventListener('click', () => {
                 modal.querySelector('.transform').classList.add('scale-95');
                 setTimeout(() => modal.classList.add('hidden'), 300);
            });
            modal.addEventListener('click', (e) => {
                if(e.target === modal) {
                    modal.querySelector('.transform').classList.add('scale-95');
                    setTimeout(() => modal.classList.add('hidden'), 300);
                }
            });
        }
        
        function setupDestinationExplorer() {
            const tabs = document.querySelectorAll('.destination-tab');
            const container = document.getElementById('destination-content-container');
            
            function renderContent(destination) {
                const data = honeymoonData.destinations[destination];
                container.innerHTML = `<div class="card p-6 md:p-8">${data.content}</div>`;
                setupAccordions();

                const generateDelicaciesBtn = document.getElementById(`generateDelicaciesBtn_${destination}`);
                const delicacyOutput = document.getElementById(`aiDelicacyOutput_${destination}`);
                generateDelicaciesBtn.addEventListener('click', generateDelicacySuggestions);
                delicacyOutput.innerHTML = ''; // Clear previous suggestions
            }
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('tab-active'));
                    tab.classList.add('tab-active');
                    const target = tab.dataset.target === 'bangkok-content' ? 'bangkok' : 'chiangMai';
                    renderContent(target);
                });
            });
            
            renderContent('bangkok');
        }

        function setupAccordions() {
            const accordions = document.querySelectorAll('.accordion-header');
            accordions.forEach(accordion => {
                accordion.classList.add('cursor-pointer', 'font-bold', 'text-xl', 'text-gray-700', 'py-3', 'border-b', 'hover:text-[#D98B76]', 'transition');
                accordion.addEventListener('click', () => {
                    const content = accordion.nextElementSibling;
                    const isOpen = content.style.maxHeight;
                    
                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                    
                    if (!isOpen) {
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                });
            });
        }

        function setupNavigation() {
            const links = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');
            const mobileNav = document.getElementById('mobile-nav');

            function changeActiveLink() {
                let index = sections.length;
                while(--index && window.scrollY + 100 < sections[index].offsetTop) {}
                links.forEach((link) => link.classList.remove('nav-active'));
                const activeLink = document.querySelector(`.nav-link[href="#${sections[index].id}"]`);
                if(activeLink) activeLink.classList.add('nav-active');
            }

            changeActiveLink();
            window.addEventListener('scroll', changeActiveLink);

            links.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.querySelector(link.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                });
            });

            mobileNav.addEventListener('change', (e) => {
                const target = e.target.value;
                document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
            });
        }

        async function generateActivitySuggestions(event) {
            const button = event.target;
            const day = button.dataset.day;
            const location = button.dataset.location;
            const activity = button.dataset.activity;
            const outputDiv = document.getElementById('aiActivityOutput');
            const spinner = document.getElementById('activitySpinner');

            outputDiv.innerHTML = ''; // Clear previous suggestions
            spinner.classList.remove('hidden');
            button.disabled = true;

            const prompt = `You are a honeymoon travel expert specializing in Thailand. Given that a couple is on their honeymoon in ${location} on Day ${day} and their current main planned activity is '${activity}', suggest 3-4 romantic, unique, and budget-friendly alternative or additional activities or hidden gems suitable for a honeymoon couple. Focus on experiences rather than just sights. Present each suggestion as a short, engaging description. Provide only the suggestions as a numbered list.`;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    outputDiv.innerHTML = text.replace(/\n/g, '<br>');
                } else {
                    outputDiv.innerHTML = 'Sorry, I could not generate suggestions at this time. Please try again.';
                }
            } catch (error) {
                console.error('Error fetching AI activity suggestions:', error);
                outputDiv.innerHTML = 'An error occurred while fetching suggestions. Please try again later.';
            } finally {
                spinner.classList.add('hidden');
                button.disabled = false;
            }
        }

        async function generateDelicacySuggestions(event) {
            const button = event.target;
            const location = button.dataset.location;
            const outputDiv = document.getElementById(`aiDelicacyOutput_${location}`);
            const spinner = document.getElementById(`delicacySpinner_${location}`);

            outputDiv.innerHTML = ''; // Clear previous suggestions
            spinner.classList.remove('hidden');
            button.disabled = true;

            const prompt = `You are a culinary expert specializing in Thai food. A couple is on their honeymoon in ${location}. Suggest 3-4 popular local dishes or unique dining experiences that go beyond typical street food, perfect for a romantic meal. For each, provide a brief, appetizing description, and mention its approximate price range in BDT for two people. Present only the suggestions as a numbered list, including the price.`;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    outputDiv.innerHTML = text.replace(/\n/g, '<br>');
                } else {
                    outputDiv.innerHTML = 'Sorry, I could not generate suggestions at this time. Please try again.';
                }
            } catch (error) {
                console.error('Error fetching AI delicacy suggestions:', error);
                outputDiv.innerHTML = 'An error occurred while fetching suggestions. Please try again later.';
            } finally {
                spinner.classList.add('hidden');
                button.disabled = false;
            }
        }

        setupCharts();
        setupItinerary();
        setupModal();
        setupDestinationExplorer();
        setupNavigation();
    });
    </script>
</body>
</html>
